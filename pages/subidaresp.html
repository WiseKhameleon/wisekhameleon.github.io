<!-- subida.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Subir archivo</title>
</head>
<body>
  <h2>Subir archivo</h2>
  <form id="formularioSubida">
    <input type="file" name="archivo" id="archivo" required>
    <input type="password" id="clave" placeholder="ContraseÃ±a" required>
    <button type="submit">Subir</button>
  </form>

  <p id="respuesta"></p>

  <script>
    const BACKEND_URL = 'https://whitekhameleon.ddns.net:3737'; // cambia esto si usas ngrok temporal

    document.getElementById('formularioSubida').addEventListener('submit', async function(e) {
      e.preventDefault();

      const password = document.getElementById('clave').value;
      const archivo = document.getElementById('archivo').files[0];

      const formData = new FormData();
      formData.append('archivo', archivo);

      const respuesta = await fetch(`${BACKEND_URL}/subir`, {
        method: 'POST',
        headers: {
          'Authorization': 'Basic ' + btoa('admin:' + password)
        },
        body: formData
      });

      const resultado = await respuesta.json();
      document.getElementById('respuesta').textContent = resultado.mensaje || 'Error al subir.';
    });
  </script>
</body>
</html>



